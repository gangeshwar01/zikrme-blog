{% extends 'panel/base.html' %}
{% block title %}Hero Images{% endblock %}
{% block nav_dashboard %}{% endblock %}
{% block content %}
<div class="flex items-center justify-between mb-4">
  <h1 class="text-xl font-semibold text-slate-800">Hero Images</h1>
  <button onclick="document.getElementById('heroModal').classList.remove('hidden')" class="px-3 py-2 rounded-lg bg-blue-600 text-white shadow-sm">Upload</button>
  <div id="heroModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center">
    <div class="bg-white rounded-xl w-[92%] max-w-lg p-5">
      <div class="flex items-center justify-between mb-3">
        <h3 class="font-semibold">Upload Hero Image</h3>
        <button onclick="this.closest('#heroModal').classList.add('hidden')"><i class="ri-close-line"></i></button>
      </div>
      <form method="post" enctype="multipart/form-data" action="{% url 'panel_hero_create' %}" class="space-y-3">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="flex justify-end gap-2">
          <button type="button" onclick="document.getElementById('heroModal').classList.add('hidden')" class="px-3 py-2 rounded-lg border">Cancel</button>
          <button class="px-3 py-2 rounded-lg bg-blue-600 text-white">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

{% if error_message %}
<div id="flash-error" class="mb-3 p-3 bg-red-50 text-red-700 border border-red-200 rounded">{{ error_message }}</div>
{% endif %}
{% if success_message %}
<div id="flash-success" class="mb-3 p-3 bg-green-50 text-green-700 border border-green-200 rounded">{{ success_message }}</div>
<script>
  setTimeout(function(){
    var el = document.getElementById('flash-success');
    if(el){ el.style.transition='opacity .4s'; el.style.opacity='0'; setTimeout(function(){ el.remove(); }, 450); }
  }, 2500);
  setTimeout(function(){
    var el = document.getElementById('flash-error');
    if(el){ el.style.transition='opacity .4s'; el.style.opacity='0'; setTimeout(function(){ el.remove(); }, 450); }
  }, 2500);
 </script>
{% endif %}

<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
  {% for h in items %}
  <div class="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm">
    <div class="aspect-video bg-slate-100 flex items-center justify-center">
      {% if h.image %}
        <img src="{{ h.image.url }}" class="w-full h-full object-cover" />
      {% else %}
        <span class="text-slate-400">No image</span>
      {% endif %}
    </div>
    <div class="p-3 flex items-center justify-between">
      <div class="text-sm text-slate-600">{{ h.caption|default:'â€”' }}</div>
      <div class="flex items-center gap-3 text-sm">
        <form method="post" action="{% url 'panel_hero_toggle' h.pk %}">{% csrf_token %}
          <button class="text-blue-600">{{ h.is_active|yesno:'Disable,Activate' }}</button>
        </form>
        <a class="text-slate-700" href="{% url 'panel_hero_edit' h.pk %}">Edit</a>
        <form method="post" action="{% url 'panel_hero_delete' h.pk %}" onsubmit="return confirm('Delete this image?')">{% csrf_token %}
          <button class="text-red-600">Delete</button>
        </form>
      </div>
    </div>
  </div>
  {% empty %}
  <p class="text-slate-500">No hero images yet.</p>
  {% endfor %}
</div>
{% endblock %}


