{% extends 'panel/base.html' %}
{% block title %}Categories{% endblock %}
{% block nav_categories %}bg-blue-50 text-blue-600{% endblock %}
{% block content %}
<div class="flex items-center justify-between mb-4">
  <h1 class="text-xl font-semibold text-slate-800">Categories</h1>
  <button onclick="document.getElementById('catModal').classList.remove('hidden')" class="px-3 py-2 rounded-lg bg-blue-600 text-white shadow-sm">New Category</button>
  <div id="catModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center">
    <div class="bg-white rounded-xl w-[92%] max-w-lg p-5">
      <div class="flex items-center justify-between mb-3">
        <h3 class="font-semibold">Create Category</h3>
        <button onclick="this.closest('#catModal').classList.add('hidden')"><i class="ri-close-line"></i></button>
      </div>
      <form method="post" action="{% url 'panel_category_create' %}" class="space-y-3">
        {% csrf_token %}
        {{ form.as_p }}
        <div class="flex justify-end gap-2">
          <button type="button" onclick="document.getElementById('catModal').classList.add('hidden')" class="px-3 py-2 rounded-lg border">Cancel</button>
          <button class="px-3 py-2 rounded-lg bg-blue-600 text-white">Create</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="bg-white border border-slate-200 rounded-xl overflow-hidden shadow-sm">
  <div class="p-3 border-b border-slate-200 flex items-center gap-2">
    <div class="text-slate-600 text-sm">Total: {{ items|length }}</div>
  </div>
  <table class="min-w-full text-sm">
    <thead class="bg-slate-50">
      <tr class="text-left text-slate-500">
        <th class="p-3">Name</th>
        <th class="p-3">Icon</th>
        <th class="p-3 w-40"></th>
      </tr>
    </thead>
    <tbody class="divide-y divide-slate-100">
      {% for c in items %}
      <tr>
        <td class="p-3">{{ c.name }}</td>
        <td class="p-3"><i class="{{ c.icon_class|default:'ri-price-tag-3-line' }}"></i></td>
        <td class="p-3 text-right">
          <a class="px-2 py-1 text-blue-700" href="{% url 'panel_category_edit' c.pk %}">Edit</a>
          <form method="post" action="{% url 'panel_category_delete' c.pk %}" class="inline">
            {% csrf_token %}
            <button class="px-2 py-1 text-red-600" onclick="return confirm('Delete this category?')">Delete</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr><td class="p-3 text-slate-500" colspan="3">No categories yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}


